<?xml version="1.0" encoding="UTF-8"?>
<plugin>

   <extension-point id="acceptedCommands" name="%extension-point.commands.name" schema="schema/acceptedCommands.exsd"/>

   <extension
         point="org.eclipse.e4.ui.macros.acceptedCommands">
      <acceptedCommand
            id="org.eclipse.e4.ui.macros.toggleRecordMacro"
            recordActivation="false">
      </acceptedCommand>
   </extension>

   <extension
         point="org.eclipse.e4.core.macros.macroCommandsFactory">
      <macroCommandsFactory
            class="org.eclipse.e4.ui.macros.internal.keybindings.MacroForParameterizedCommandFactory"
            macroCommandId="org.eclipse.e4.ui.bindings.keys.parameterizedMacroCommand">
      </macroCommandsFactory>
   </extension>

   <extension
         point="org.eclipse.e4.core.macros.macroContextListeners">
      <macroListener
            class="org.eclipse.e4.ui.macros.internal.keybindings.KeyBindingDispatcherInterceptorInstaller">
      </macroListener>
   </extension>

   <extension
         point="org.eclipse.ui.commands">
      <category
            id="org.eclipse.e4.ui.macros.category"
            name="%category.macros.name">
      </category>
      <command
            categoryId="org.eclipse.e4.ui.macros.category"
            defaultHandler="org.eclipse.e4.ui.macros.internal.actions.ToggleMacroRecordAction"
            id="org.eclipse.e4.ui.macros.toggleRecordMacro"
            name="%command.toggle_macro_record.label">
      </command>
      <command
            categoryId="org.eclipse.e4.ui.macros.category"
            defaultHandler="org.eclipse.e4.ui.macros.internal.actions.MacroPlaybackAction"
            id="org.eclipse.e4.ui.macros.macroPlayback"
            name="%command.macro_playback.name">
      </command>
   </extension>

   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="org.eclipse.e4.ui.macros.toolbar"
               label="%toolbar.macro.label">
            <command
                  commandId="org.eclipse.e4.ui.macros.toggleRecordMacro"
                  icon="icons/full/dtool16/macro_record.png"
                  label="%command.toggle_macro_record.label"
                  style="toggle">
            </command>
            <command
                  commandId="org.eclipse.e4.ui.macros.macroPlayback"
                  icon="icons/full/dtool16/macro_playback.png"
                  label="%command.macro_playback.name"
                  style="push">
            </command>
         </toolbar>
      </menuContribution>
   </extension>


</plugin>
